#!name=iWOD 综合体能 AI 助手
#!desc=监听 iWOD 小程序响应，自动分析“综合体能”课程并生成建议。
#!category=健身助手

[Argument]
AI_API_KEY = input, "sk-xxxx", tag=AI API Key, desc=填入你的 AI 服务商密钥
AI_API_URL = input, "https://api.openai.com/v1/chat/completions", tag=API 请求地址, desc=支持 OpenAI 格式的端点
AI_MODEL = input, "gpt-4o", tag=模型名称, desc=例如 gpt-4o 或 deepseek-chat

[Script]
# 拦截响应逻辑
# 必须开启 requires-body 以获取 WOD 文字
iWOD_Handler = type=http-response,pattern=^https:\/\/api2\.iwod\.cn\/everydayWod\/getWodList,requires-body=true,script-path=https://raw.githubusercontent.com/Xujingling927/Script/refs/heads/main/iwod/iwod_handler.js,argument={%AI_API_KEY%},{%AI_API_URL%},{%AI_MODEL%}

# 仪表盘回显
iWOD_Dashboard = type=generic,timeout=10,script-path=https://raw.githubusercontent.com/Xujingling927/Script/refs/heads/main/iwod/iwod_panel.js

[MITM]
hostname = %APPEND% api2.iwod.cn